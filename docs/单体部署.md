8. 单体启动模式
在 yudao-cloud 微服务项目的根目录，你会看到和 ruoyi-vue-pro 单体项目的根目录一样，有一个 yudao-server 模块？！

没错，它就是 yudao-cloud 微服务项目的【单体启动模式】：

1）不依赖 Nacos 注册中心、配置中心
2）不使用 Feign 远程调用（都是 Spring Bean 本地调用）
3）只启动一个 Java 进程
#8.1 单体启动的好处
主要解决三个好处：

后悔药：项目一开始采用了 yudao-cloud 微服务架构，结果后续上线发现资源不足，或者实际业务量不大，则可以改成使用 yudao-server 单体启动模式部署。
开发提速：本地启动 yudao-cloud 多个微服务很麻烦，而 yudao-server 则可以直接启动一个 yudao-server 项目，即可启动所有的微服务，方便开发。
架构升级：技术选型时，不确定使用微服务架构还是单体架构，则可以直接选择 yudao-cloud 项目，最终按需部署微服务还是单体。
#8.2 如何单体启动
yudao-server 的启动非常简单，只需要运行 YudaoServerApplication 类即可！默认只开启 system 和 infra 模块。其它模块的开启，参考对应模块的“功能开启”即可！

具体的实现原理，可以看看 18e4b1f (opens new window)提交。

ps：😜 艿艿在 2013 年参与创业的时候，项目就采用单体多模块架构（类似 ruoyi-vue-pro 项目），后来也切换到支持单体和微服务启动的架构（类似 yudao-cloud 项目）。

#8.3 如何打包部署
注意，直接打包 yudao-server 模块，是无法运行的。并且，你会发现打包出来的 jar 包，大小非常大，有 500M 以上，甚至更大，可见 https://t.zsxq.com/3yZfh (opens new window)帖子。

原因是，yudao-server 引入的是每个服务的 jar 包，而每个 jar 包使用 spring-boot-maven-plugin 插件进行打包。

解决方案是，将引入的（使用到）服务的 spring-boot-maven-plugin 配置成 skip 即可，可见 《Maven 子模块排除 spring-boot-maven-plugin》 (opens new window)博客。

例如说，修改 yudao-module-system-server 和 yudao-module-infra-server 模块的 pom.xml 文件，将 spring-boot-maven-plugin 配置成 skip。

    <build>
        <!-- 设置构建的 jar 包名 -->
        <finalName>${project.artifactId}</finalName>
        <plugins>
            <!-- 打包 -->
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <goals>
                            <goal>repackage</goal> <!-- 将引入的 jar 打入其中 -->
                        </goals>
                    </execution>
                </executions>
                <!-- 注意！！！重点是下面 3 行！！！ -->
                <configuration>
                    <skip>true</skip>
                </configuration>
            </plugin>
        </plugins>
    </build>
另外，如果你想快速打包 yudao-server 的 jar 包，需要使用 mvn package -am -pl yudao-server -Dmaven.test.skip=true 命令。

具体学习，可见 《maven -pl -am -amd 参数》 (opens new window)博文。

#


以上是单体说明，我们需要启动 system ，infra， chrome 三个模块，MySQL 数据库单独创建整合现有的yudao-cloud和maipro_chrome。